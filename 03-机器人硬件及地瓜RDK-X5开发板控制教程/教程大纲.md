# 作者说

  首先非常荣幸可以参与到 AI+硬件开源教程项目中来,本人主要负责硬件电路设计部分(PCB 的设计与绘制)教程的编写与分享，对于数字电路 模拟电路部分不做具体的讲解。在以后的课程中我将以自己的部分项目以及地瓜机器人和古月居联合推出的 OriginBot 小车为例进行课程的讲解。

  对于一个刚入门的机器人开发者来说，在进行项目学习时使用成品的硬件电路开发板在时间成本和金钱成本上都是十分划算的。当然市面上的成品开发板可能无法同时满足我们项目多样化的需求，或者功能过于冗杂，这时就需要我们设计符合我们项目的硬件电路。

  在开发项目时我们可能用面包板、飞线进行项目的验证，硬件电路 PCB 的设计可以把飞线都集成到 PCB 中，是项目的软件的调试验证变的容易。这时 PCB 主要为插件的形式。当项目软件调试完成，功能确定，确定为一款产品时，此时的 PCB 设计主要为贴片设计，结构更加优化，性能更好，便于大规模生产。

  本课程的 PCB 设计基于国产软件嘉立创 EDA,这款软件免费易上手，同时使用这款软件设计的 10cm x 10cm 以内的 PCB 可以进行免费打样制作，其他有点在这里不过多的赘述。

  由于本人的技术水平有限，在教程中出现的问题欢迎大家批评指正,大家一起交流学习,共同进步。我的联系方式是:13503388923

# 软件下载与安装
## 1.下载网址
 (https://lceda.cn/page/download?src=index)
  
  建议下载EDA专业版与标准版相比功能更加强大。
  PS:需要提前完成嘉立创账号的注册。
##  2.安装教程与使用说明
  https://prodocs.lceda.cn/cn/faq/client/index.html

##  3.教程PDF下载
  https://image.lceda.cn/files/LCEDA-Pro-Tutorial_v2.2.x.pdf

# 项目案例一 
该项目为个人项目，只为大家分享我的设计制作思路，复刻无任何意义，不建议复刻。第二个项目会带领大家做一个OriginBot的底层驱动板（插件版本），第三个项目如果有时间再做一个OriginCar的底层驱动板。
## 1.项目介绍
该项目为我为自己的机器人开发的一款底层驱动板，用于接受上位机的CAN信号，对CAN信号进行解析处理后，控制电机的运转。
## 2.硬件电路组成
该PCB由STM32F103最小系统板、降压模块、CAN信号模块、XT30电源输入接口、电源开关、蜂鸣器、电机驱动模块、OLED显示屏、电机接口、等预留接口组成。
## 3.分配引脚确定连接关系
在设计PCB绘制原理图之前，我的习惯是把各个模块的印记罗列出来，根据引脚的定义不同，确定好引脚的连接关系，我使用的是STM32F103，我会参照引脚定义进行分配引脚，进而才可以开发程序，调用不同的IO口。
### 1）硬件选型
暂时无法在飞书文档外展示此内容
### 2）引脚分配
根据产品功能进行硬件选型再进行引脚分配，这也体现了软件硬件的结合。
项目一  引脚分配 （点击蓝色字体可打开引脚分配表）
进行引脚分配时要:
#### a.避免引脚的冲突，优先选用第一功能的引脚，然后再考虑引脚的复用功能
#### b.重点分配具有特殊功能的引脚比如串口通信 ：RX TX引脚 CAN通信引脚 产生PWM 以及读取编码器信号灯的定时器引脚
#### c.考虑引脚在最小系统板是的位置，为以后连接线时减轻障碍。
#### d.普通的IO引脚可以先大致分配，在绘制原理图是在根据线路的难易程度进行重新分配

## 4.绘制原理图
### 1）选择合适大小图纸
根据元器件的多少，选择合适大小的的图纸，同时也可以选择图纸的单位，根据个人习惯，我比较习惯选择mm为单位。
### 2）放置元器件
根据引脚分配表依次在元器件库中选取元器件进行放置，将原理图进行规划，将不同的元器件放置在不同的位置，我个人比较喜欢先绘制最小系统板。
 在原理图界面的左侧点击常用库，就可以直接选取一些常用的元器件，以及开发板：

在界面最上面菜单栏点击放置然后点击菜单第一个 器件·复用模块 也可以选择相应的模块：

### 3）绘制网络标签和导线
元器件放置完成后，将元器件的各个引脚上打上网络标签，用于表示引脚的功能定义，同时用导线将部分元器件进行连接。

### 4）绘制短接标识
短接标识是让不同两个模块的引脚连接在一起

### 5）检查原理图
a.根据引脚分配表检查原理图绘制是否正确，元器件是否放置完整（前提是引脚分配表不能有错误）
b.进行DRC检查
DRC检查可以检查原理图是否符合设计规则。

### 6）项目一 原理图
## 5.绘制PCB
### 1）转换原理图到PCB
点击最上面菜单栏中的设计后会弹出菜单，然后点击第一个 更新/转换原理图到PCB；
转换到原理图之后各个元器件是散落在一起的
### 2）绘制板框
板框就是整个PCB板的外边缘框线，板框确定就确定了PCB的形状以及尺寸，复杂形状的PCB可以在制图软件绘制好后另存为DXF文件然后导入到嘉立创中，如果是方形的建议给板框增加一个小的圆角。
### 3）布局元器件位置
  确定各个元器件在PCB上的布局，以及接口在元器件上的布局。
### 4）连接线路
#### a.导线不能出现锐角和直角
#### b.导线的粗细要视情况而定（电压 电流 阻抗 ）
#### c.信号线尽量避免过孔

### 5）绘制丝印
丝印相当于代码中的注释，可直观地告诉我们PCB上元器件的位置 功能 引脚的定义等
### 6）添加泪滴和铺铜

铺铜时，顶面和底面都铺铜，但PCB上不是所有的地方都可以铺铜，例如天线 晶振等局域不可以铺铜
### 7）查看3D仿真
### 8）导出文件领劵打样
#### a.导出制板文件
#### b.下载并登录下单助手
下载地址：
https://www.jlc.com/portal/appDownloadsWithConfig.html
#### c.领取优惠劵
最左侧菜单栏目：用户中心/优惠券中心/免费券领取
#### d.下单
点击下单后，导入之前的制版文件，根据引导选择相应参数即可。
板材类别：一般选用FR4 ；数量为5片  ，厚度一般为1.6 ，其余的按照不收费的进行选取，收费服务会有写明。
界面右边会显示可以使用的优惠劵
####9）项目工程文件（点击蓝色字体打开工，程文件）


#后续更新
 后续文章将持续以飞书云文档的形式进行更新，同时也将教程用到的文档资料上传GitHub以及飞书云文档中。

  ***飞书云文档更新地址：https://ccnkcsofi4yc.feishu.cn/wiki/Dbd9wGgeOikcLyk8YWkcKvb7n5m?from=from_copylink***